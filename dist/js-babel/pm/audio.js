'use strict';var pMachine=pMachine||{};(function(a){function b(){clearTimeout(k);var a=window.AudioContext||window.webkitAudioContext;h=new a,d()}function c(){if(h){var a=h.currentTime;j.gain.linearRampToValueAtTime(0,a+2)}k=setTimeout(function(){h.close(),h=null},2000)}function d(){var a=function(){var a=0,b=h.createScriptProcessor(4096,1,1);return b.onaudioprocess=function(b){for(var c,d=b.outputBuffer.getChannelData(0),e=0;4096>e;e++)c=2*Math.random()-1,d[e]=(a+.02*c)/1.02,a=d[e],d[e]*=2},b}();i=h.createBiquadFilter(),j=h.createGain(),j.gain.value=0,j.connect(h.destination),i.connect(j),a.connect(i),e(h,i)}function e(a,b){l=a.createBufferSource();var c=new XMLHttpRequest;c.open("GET","audio/forest-ambient-loop-1.wav",!0),c.responseType="arraybuffer",c.onload=function(){var d=c.response;a.decodeAudioData(d,function(a){l.buffer=a,l.playbackRate.value=1,l.connect(b),l.loop=!0,l.start(0)},function(a){"Error with decoding audio data"+a.err})},c.send()}function f(a,b,c){if(h){var d=h.currentTime;console.log(JSON.stringify([a,b])),"pm-control-downers"==a?i.frequency.linearRampToValueAtTime(800*b,d+c):"pm-control-uppers"==a&&j.gain.linearRampToValueAtTime(b,d+c)}}var g=a.audio={},h=null,i=null,j=null,k=null;g.turnOn=b,g.turnOff=c,g.startBrownNoise=d;var l=null;g.handleFloat=f,g.selectVibe=function(){}})(pMachine);