'use strict';var pMachine=pMachine||{};(function(a){function b(a){return a.originalEvent&&a.originalEvent.touches}function c(a){return physii.math.loneRanger(a,-Math.PI,Math.PI,0,2*Math.PI)}function d(a){var b=c(a);return b=physii.math.loneRanger(b,Math.PI/4,7*Math.PI/4,0,1),b}function e(a){var b=physii.math.loneRanger(a,0,1,Math.PI/4,7*Math.PI/4),c=physii.math.loneRanger(b,0,2*Math.PI,-Math.PI,Math.PI);return c}function f(a,b){if(n){var c=n,e=c.width(),f=c.height(),g=0,j=0,k=c[0].getBoundingClientRect(),e=k.width,f=k.height,m=c.offset();g=a-(m.left+e/2),j=b-(m.top+f/2);var o=-j,p=g,q=Math.atan2(p,o),r=d(q),s=c.attr("id");if("pm-control-uppers"===s){var t=physii.math.loneRanger(r,0,1,-30,0);r=i(t)}l(s,r),q>3*Math.PI/4?q=3*Math.PI/4:q<-3*Math.PI/4&&(q=-3*Math.PI/4),c.css("transform","translate(-50%, -50%)  rotate("+q+"rad)")}}function g(){h()||$(".web-show").css("display","");for(var a=["pm-control-uppers","pm-control-downers"],b=0;b<a.length;b++){var c=a[b],d=$("#"+c),f=m(c);q&&q.handleFloat(c,f,1),"pm-control-uppers"===c&&(f=j(f,-30,0));var g=e(f);d.css("transform","translate(-50%, -50%)  rotate("+g+"rad)")}}function h(){return"PeaceMachineInterface"in window}function i(a){var b=Math.pow(10,a/20);return b}function j(a,b,c){var d=k(a);return d=physii.math.loneRanger(d,b,c,0,1),d}function k(a){return 20*Math.log10(a)}function l(a,b){r.setItem(a,JSON.stringify(b)),q&&q.handleFloat(a,b,.01)}function m(a){var b=JSON.parse(r.getItem(a));return b}var n=null,o=0,p=0,q=window.PeaceMachineInterface||pMachine.audio,r=window.localStorage,s=null;$(function(){s=$(".rotatable"),s.bind("mousedown touchstart",function(a){a.stopPropagation(),a.preventDefault(),n=$(a.target)}),s.bind("touchend",function(a){a.stopPropagation(),n=null}),$(document.body).bind("mousemove touchmove",function(a){var c=a;b(a)&&(c=a.originalEvent.touches[0]),o=c.pageX,p=c.pageY,f(o,p),a.stopPropagation()}),$(document.body).bind("mouseup mouseleave",function(){n=null})}),a.turnOn=function(){q.turnOn(),g();var a=$(".pm-landing");a.fadeOut(1e3,function(){a.hide()})},a.dropOut=function(){q.turnOff();var a=$(".pm-landing");a.fadeIn(1600,function(){a.show()})},a.tuneIn=function(){var a=$(".pm-landing"),b=$(".pm-tune-in");b.fadeIn(1e3,function(){b.show(),a.hide()})},a.tuneOut=function(){var a=$(".pm-tune-in");a.fadeOut(1600,function(){a.hide()})},g()})(pMachine);