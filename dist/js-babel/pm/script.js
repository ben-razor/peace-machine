"use strict";$(function(){function a(a){return a.originalEvent&&a.originalEvent.touches}function b(a){return physii.math.loneRanger(a,-Math.PI,Math.PI,0,2*Math.PI)}function c(a){var c=b(a);return c=physii.math.loneRanger(c,Math.PI/4,7*Math.PI/4,0,1),c}function d(a){var b=physii.math.loneRanger(a,0,1,Math.PI/4,7*Math.PI/4),c=physii.math.loneRanger(b,0,2*Math.PI,-Math.PI,Math.PI);return c}function f(a,b){if(k){var d=k,e=d.width(),f=d.height(),j=0,l=0,m=d[0].getBoundingClientRect(),e=m.width,f=m.height,n=d.offset();j=a-(n.left+e/2),l=b-(n.top+f/2);var o=-l,p=j,q=Math.atan2(p,o),r=c(q),s=d.attr("id");if("pm-control-uppers"===s){var t=physii.math.loneRanger(r,0,1,-24,0);r=g(t)}i(s,r),q>3*Math.PI/4?q=3*Math.PI/4:q<-3*Math.PI/4&&(q=-3*Math.PI/4),d.css("transform","translate(-50%, 0%)  rotate("+q+"rad)")}}function g(a){var b=Math.pow(10,a/20);return b}function i(a,b){p.setItem(a,JSON.stringify(b)),o&&o.handleFloat(a,b)}function j(a){var b=JSON.parse(p.getItem(a));return b}var k=null,l=$(".rotatable"),m=0,n=0,o=window.PeaceMachineInterface||pMachine.audio,p=window.localStorage;l.bind("mousedown touchstart",function(a){a.stopPropagation(),a.preventDefault(),k=$(a.target)}),l.bind("mouseout touchend",function(a){a.stopPropagation(),k=null}),$("#pm-screen-background").bind("mouseout",function(a){a.stopPropagation()}),$(document.body).bind("mousemove touchmove",function(b){var c=b;a(b)&&(c=b.originalEvent.touches[0]),m=c.pageX,n=c.pageY,f(m,n),b.stopPropagation()}),$(document.body).bind("mouseup mouseout",function(){k=null}),function(){for(var a=["pm-control-uppers","pm-control-downers"],b=0;b<a.length;b++){var c=a[b],e=$("#"+c),f=j(c),g=d(f);e.css("transform","translate(-50%, 0%)  rotate("+g+"rad)"),o&&o.handleFloat(c,f)}}()});